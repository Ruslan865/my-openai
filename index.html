<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8">
  <title>Super AI Kod</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #0f0; padding: 20px; }
    input, button { font-size: 18px; padding: 5px; margin-top: 10px; width: 100%; }
    #output { margin-top: 20px; white-space: pre-line; }
  </style>
</head>
<body>
  <h2>🧠 Super AI Kod</h2>
  <input id="question" placeholder="Sual ver..." />
  <button onclick="ask()">Soruş</button>
  <div id="output"></div>

  <script>
    const depo = {}; // Yaddaş bazası

    async function searchWeb(query) {
      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      const searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
      try {
        const res = await fetch(proxyUrl + searchUrl);
        const html = await res.text();
        const matches = html.match(/<span class="hgKElc">(.+?)<\/span>/);
        if (matches && matches[1]) return matches[1];
        return "Əlaqəli cavab tapılmadı.";
      } catch (err) {
        return "Scraping zamanı xəta baş verdi.";
      }
    }

    async function ask() {
      const input = document.getElementById("question");
      const question = input.value.trim();
      input.value = "";

      if (!question) return;

      const lower = question.toLowerCase();
      document.getElementById("output").innerText += `\n🙋‍♂️ Sən: ${question}`;

      if (depo[lower]) {
        document.getElementById("output").innerText += `\n🤖 Cavab (depo): ${depo[lower]}`;
      } else {
        document.getElementById("output").innerText += `\n🔍 Axtarılır...`;
        const cavab = await searchWeb(question);
        depo[lower] = cavab; // yadda saxla
        document.getElementById("output").innerText += `\n🤖 Cavab (web): ${cavab}`;
      }
    }
  </script>
</body>
</html>
